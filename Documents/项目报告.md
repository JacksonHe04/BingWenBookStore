# 课程报告

## 一、项目概述

本次课程设计基于《数据库原理》课程的学习目标，完成了一个以 **秉文书城** 为主题的网上书店系统开发。项目整体框架分为前端、后端和数据库三大部分，旨在通过项目实践强化对数据库设计与应用的理解，同时培养前后端协作能力与综合开发技能。

项目的开发分工如下：
- **前端开发与文档**：由我（何锦诚）负责，主要完成页面的设计与实现、状态管理和与后端接口联调。
- **后端开发与数据库交互**：由郑宇榕和刘睿哲负责，包括数据库设计、接口开发和后端逻辑实现。

项目的实现结合了《数据库原理》中关于关系数据库的建模方法、数据查询优化和数据完整性约束等知识点，切实将课程理论运用到实际开发中。

---

## 二、开发背景

网上书店作为电子商务的重要组成部分，不仅需要良好的用户体验，更需要强大的数据库支持，以管理商品信息、订单记录和用户数据。本项目旨在搭建一个功能完善的网上书店系统，重点应用《数据库原理》中学习的核心知识，如数据库建模、查询优化和数据一致性保障等。

### 主要功能
1. 图书分类浏览
2. 搜索与筛选
3. 购物车功能
4. 用户登录与状态管理
5. 订单管理
6. 支付功能（模拟）

---

## 三、技术实现

### 1. 前端技术栈

前端采用 Vue 3 和 Vite 构建，主要技术包括：
- **Vue 3**：用于实现模块化的组件化界面设计。
- **Pinia**：用于管理全局状态，包括用户信息和购物车数据。
- **Axios**：处理与后端的 API 调用，实现数据交互。
- **SCSS**：提高样式的复用性和可维护性。
- **Vite**：提升开发和构建效率，支持模块热更新。

#### 前端目录结构
```plaintext
Frontend-Vite/
├── public/                # 静态资源目录  
├── src/                   # 核心源码  
│   ├── assets/            # 静态文件（CSS、图片等）  
│   ├── apis/              # API 接口管理  
│   ├── components/        # 通用组件  
│   ├── router/            # 路由配置  
│   ├── stores/            # 状态管理  
│   ├── utils/             # 工具函数  
│   └── views/             # 页面组件  
├── vite.config.js         # Vite 配置  
└── package.json           # 项目依赖  
```  

#### 核心功能模块
- **用户登录与状态管理**：通过 Pinia 管理用户登录状态，实现跨组件数据共享。
- **购物车功能**：用户可将商品加入购物车，商品数据通过 API 同步到后端，并在页面实时显示。
- **订单管理**：支持用户下单并查看订单历史，订单数据由后端管理并提供接口支持。

---

### 2. 后端技术栈

后端采用 Django 框架开发，结合 MySQL 数据库，为前端提供 RESTful API 支持。

#### 后端目录结构
```plaintext
BookStoreBackend/
├── BookStoreBackend/      # 项目配置  
├── cart/                  # 购物车模块  
├── category/              # 图书分类模块  
├── order/                 # 订单模块  
├── product/               # 图书信息管理模块  
├── user/                  # 用户管理模块  
└── util.py                # 工具函数  
```  

#### 数据库设计
数据库采用 MySQL，设计了以下主要表：
1. **用户表**：存储用户的登录凭据和个人信息。
2. **图书表**：存储图书的详细信息，如书名、作者、价格等。
3. **订单表**：记录用户订单的详细信息，包括订单状态和关联的商品列表。
4. **购物车表**：记录用户添加到购物车中的商品信息。

#### API 接口设计
后端为前端提供了以下主要接口：
- **用户接口**：用户登录、个人信息获取与更新。
- **图书接口**：获取图书分类、详细信息与搜索结果。
- **订单接口**：订单创建、查询与更新。

---

## 四、项目亮点

1. **数据库设计与优化**
    - 在《数据库原理》的学习基础上，设计了规范的关系数据库，表结构符合 3NF（第三范式）标准，避免了数据冗余。
    - 使用索引优化了高频查询操作（如图书搜索）。

2. **模块化开发**
    - 前端组件化设计，所有页面均由通用组件构成，提高了代码的可复用性。
    - 后端功能模块划分清晰，接口设计符合 RESTful 标准，便于前后端分离开发。

3. **安全性增强**
    - 针对用户认证模块，后端采用 JWT（JSON Web Token）机制进行用户登录的状态验证，保证数据交互的安全性。

4. **性能优化**
    - 利用 Vite 提升了开发构建效率。
    - 使用分页技术减少大数据量查询的压力。

---

## 五、遇到的问题与解决方案

### 1. **静态资源路径错误**
**问题**：在将前端项目部署到 Vercel 时，静态资源路径不正确，导致页面加载失败。  
**解决方案**：在 `vite.config.js` 中设置 `base` 参数，使资源路径适配 Vercel 的部署环境，同时检查 `public` 目录中的资源引用方式。

### 2. **后端对 Token 的处理**
**问题**：初始设计中，后端 Token 的生成与验证不够健全，可能导致用户登录状态的不一致性。  
**解决方案**：通过 Django 的 `rest_framework_simplejwt` 库实现 JWT 认证，增加了 Token 的有效期管理与刷新功能，确保用户在不同会话中的状态一致性。

---

## 六、课程内容在项目中的作用与启发

### 1. 数据库设计的实践应用
在课程中学习的 **ER 图建模** 和 **关系模式规范化** 理论，被直接运用到了本项目的数据库设计中。通过构建符合 3NF 的表结构，我们有效减少了数据冗余，同时增强了数据的可维护性。

### 2. 数据查询优化
本项目对高频查询（如图书搜索）使用了索引优化，并利用分页技术控制查询结果的返回量。这些优化措施得益于课程中对 **查询优化器** 工作原理的深入讲解。

### 3. 数据完整性与一致性
课程中关于数据完整性约束（如主键、外键）的内容，使我们在数据库设计中明确了表与表之间的关联关系。此外，事务机制的学习为订单模块的开发提供了重要指导，确保了订单操作的原子性与一致性。

### 4. 安全性设计
通过课程对数据库安全性的讨论，我们在项目中增加了用户数据的保护机制，如密码的加密存储和 Token 的认证机制，提升了系统的可靠性。

---

## 七、总结与收获

通过本次课程设计，我不仅巩固了《数据库原理》的理论知识，还深入理解了这些知识在实际开发中的应用价值。  
具体收获如下：
1. 掌握了数据库的设计与优化方法，学会将理论转化为实践。
2. 熟悉了 Django 框架的开发流程，增强了后端编程能力。
3. 提升了前端开发水平，熟练使用 Vue 3 和 Pinia 完成复杂页面的构建。
4. 通过团队合作，提高了任务分解与协作效率，为未来工作积累了宝贵经验。

---

## 八、致谢

感谢《数据库原理》课程的授课教师为本次课程设计提供的理论指导，感谢团队成员郑宇榕和刘睿哲在项目开发过程中的积极贡献，也感谢开源社区为开发提供的资源支持。  